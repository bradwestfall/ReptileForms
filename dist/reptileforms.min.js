!function($,window,document,undefined){ReptileForm=function(a,b){var c=this;return c.el=$(a),c.el.length?(c.settings=$.extend({method:"POST",action:window.location,useAjax:!0,reptileValidation:!0,expressions:{email:{rule:"/^[a-zA-Z0-9._-]+@[\\.a-zA-Z0-9-]+\\.[a-zA-Z.]{2,5}$/",msg:"Invalid Email."},password:{rule:"/^[\\040-\\176]{6,30}$/",msg:"Invalid Password, Must be between 6 and 30 characters."}},ready:function(){},validationError:function(){},beforeSubmit:function(){},submitSuccess:function(){},submitError:function(){}},b),c.settings.reptileValidation&&c.el.attr("novalidate","novalidate"),c.clearErrors(),c.clearValues(),c.el.attr("method")||c.el.attr("method",c.settings.method),c.el.attr("action")||c.el.attr("action",c.settings.action),c.el.children("input, select, textarea, .field-input").each(function(){if($(this).parents(".field").length)return!1;var a=$(this);switch(!0){case"hidden"==a.attr("type"):c.renderFieldHidden(a);break;case a.hasClass("field-input"):a.replaceWith(c.renderCustomField(a));break;default:a.replaceWith(c.renderField(a))}}),c.el.on("submit",function(){return c.validate()?$.isFunction(c.settings.beforeSubmit)&&!1===c.settings.beforeSubmit.call(c)?!1:c.settings.useAjax?(c.submitForm.call(c,c.el.attr("action"),c.getValues()),!1):!0:!1}),void($.isFunction(c.settings.ready)&&c.settings.ready.call(c))):!1},ReptileForm.prototype.renderField=function(a){var b=a.attr("name"),c=a.attr("title")||null,d=Boolean(a.attr("required")),e=a.data("exp-name")||null,f=a.data("custom-validation")||null;if(!b)return console.error("Field removed, requires name."),null;var g=$(a[0].outerHTML);g.removeAttr("title required data-exp-name");var g=$(document.createElement("div")).addClass("field-input").html(g),h="";switch(a[0].tagName.toLowerCase()){case"select":h="select";break;case"textarea":h="textarea";break;case"input":default:h="text"}return $(document.createElement("div")).data("name",b).data("title",c?c:b).data("exp-name",e).data("custom-validation",f).addClass("field").addClass(b).addClass(d?"required":null).addClass(h).append(c?'<div class="title">'+c+"</div>":null).append(g)},ReptileForm.prototype.renderCustomField=function(a){var b=a.data("name"),c=a.data("title")||null,d=Boolean(a.data("required")),e=a.data("exp-name")||null,f=a.data("custom-validation")||null;if(!b)return console.error("Input field removed from form. Name is required."),null;var g=$(a[0].outerHTML);return g.removeAttr("data-title data-name data-required data-exp-name data-custom-validation"),$(document.createElement("div")).data("name",b).data("title",c?c:b).data("exp-name",e).data("custom-validation",f).addClass("field").addClass(b).addClass(d?"required":null).append(c?'<div class="title">'+c+"</div>":null).append(g)},ReptileForm.prototype.renderFieldHidden=function(a){{var b=a.attr("name"),c=b;Boolean(a.attr("required"))}return b?(a.data("name",a.attr("name")).data("title",c).addClass("field").addClass(b),a.prop("outerHTML")):(console.error("Field removed, requires name."),null)},ReptileForm.prototype.validate=function(){var self=this;return self.clearErrors(),self.clearValues(),self.el.find(".field").each(function(){var formField=$(this),title=formField.data("title"),customValidation=formField.data("custom-validation");if(customValidation&&$.isFunction(self[customValidation])){var value=self[customValidation](formField);return void self.storeValue(title,value)}var value=self.getFieldValue(formField),isRequired=Boolean(formField.hasClass("required"))||Boolean(formField.attr("required"));if(self.storeValue(title,value),isRequired&&!value)return void self.addError(title,"Value is required");var expName=formField.data("exp-name");if(expName&&self.settings.expressions){var expression=self.settings.expressions[expName];expression&&expression.rule&&!eval(expression.rule).test(value)&&self.addError(title,expression.msg)}}),$.isEmptyObject(self.getErrors())?!0:($.isFunction(self.settings.validationError)&&self.settings.validationError.call(self,self.getErrors()),!1)},ReptileForm.prototype.getFieldValue=function(a){var b=a.data("name");if(!b)return console.error("Cannot retreive value from field. Name is required."),null;var c;switch(!0){case a.attr("type")&&"hidden"==a.attr("type").toLowerCase():c=a.val();break;default:c=a.find("input, select, textarea").val()||null}return c},ReptileForm.prototype.submitForm=function(a,b){var c=this;$.ajax({cache:!1,type:"POST",dataType:"JSON",url:a,data:b,success:function(a){$.isFunction(c.settings.submitSuccess)&&c.settings.submitSuccess.call(c,a)},error:function(){$.isFunction(c.settings.submitError)&&c.settings.submitError.call(c)}})},ReptileForm.prototype.addError=function(a,b){this.formErrors.push({title:a,msg:b})},ReptileForm.prototype.clearErrors=function(){this.formErrors=[]},ReptileForm.prototype.getErrors=function(){return this.formErrors},ReptileForm.prototype.storeValue=function(a,b){this.formValues[a]=b},ReptileForm.prototype.clearValues=function(){this.formValues={}},ReptileForm.prototype.getValues=function(){return this.formValues}}(jQuery,window,document);