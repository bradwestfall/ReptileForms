!function($,window,document,undefined){ReptileForm=function(e,t){this.forms=e,$(e).each(function(){$(this).data("rf",new rf(this,t))}),this.customValidation("validateRadioGroup",function(e){var t=e.find("input:checked").val(),a=e.data("name");return e.data("required")&&!t&&this.addError(a,e.data("title"),"Value Is Required"),t}),this.customValidation("validateCheckboxGroup",function(e){var t=$('input[type="checkbox"]:checked').map(function(){return $(this).val()}).get(),a=e.data("name");return e.data("required")&&!t.length&&this.addError(a,e.data("title"),"Value Is Required"),t})},ReptileForm.prototype.customValidation=function(e,t){$(this.forms).each(function(){$(this).data("rf").customValidation[e]=t})},ReptileForm.prototype.on=function(e,t){$(this.forms).each(function(){var a=$(this).data("rf");$(a).on(e,t)})},ReptileForm.prototype.submit=function(e){$(this.forms).each(function(){var t=$(this).data("rf");t.submit=e})},rf=function(e,t){var a=this;return a.customValidation=[],a.el=$(e),a.el.length?(a.settings=$.extend(!0,{xhr:!0,expressions:{email:{rule:"/^[a-zA-Z0-9._-]+@[.a-zA-Z0-9-]+.[a-zA-Z.]{2,5}$/",msg:"Invalid Email."},password:{rule:"/^[ -~]{6,}$/",msg:"Invalid Password, Must be at least 6 characters."}}},t),a.el.attr("novalidate","novalidate"),a.clearErrors(),a.clearValues(),!a.el.attr("method")&&a.settings.xhr&&a.el.attr("method","POST"),!a.el.attr("action")&&a.settings.xhr&&console.error("ReptileForm: action attribue is required when in xhr mode"),a.el.children("input, select, textarea, .field-input").each(function(){if($(this).parents(".field").length)return!1;var e=$(this);switch(!0){case"hidden"==e.attr("type"):a.renderHiddenField(e);break;case e.hasClass("field-input"):e.replaceWith(a.renderCustomField(e));break;default:e.replaceWith(a.renderField(e))}}),void a.el.on("submit",function(){return $(a).trigger("beforeValidation"),a.validForm(this)?($(a).trigger("beforeSubmit"),a.settings.xhr?a.submit(a.el.attr("action"),a.getValues()):!0):($(a).trigger("validationError",[a.getErrors()]),!1)})):!1},rf.prototype.submit=function(e,t){var a=this;return $.ajax({cache:!1,type:a.el.attr("method"),dataType:"JSON",url:e,data:t,success:function(e){$(a).trigger("xhrSuccess",e)},error:function(e,t,r){$(a).trigger("xhrError",e,t,r)}}),!1},rf.prototype.renderField=function(e){var t=e.attr("name"),a=e.attr("title")||null,r=Boolean(e.attr("required")),i=e.data("exp-name")||null,o=e.data("custom-validation")||null;if(!t)return console.error("ReptileForm: Unknown Field removed - name attribute not given"),null;var n=$(e[0].outerHTML);n.removeAttr("title data-exp-name");var n=$(document.createElement("div")).addClass("field-input").html(n),l="";switch(e[0].tagName.toLowerCase()){case"select":l="select";break;case"textarea":l="textarea";break;case"input":default:l="text"}return $(document.createElement("div")).data("name",t).data("title",a?a:t).data("exp-name",i).data("custom-validation",o).data("required",r).addClass("field").addClass(t).addClass(r?"required":null).addClass(l).append(a?"<label>"+a+"</label>":null).append(n)},rf.prototype.renderCustomField=function(e){var t=e.data("type");switch(t!==undefined&&t.toLowerCase()){case"radio-group":var a=e.find('input[type="radio"]').first(),r=a.attr("name"),i=Boolean(a.attr("required")),o="validateRadioGroup";break;case"checkbox-group":var a=e.find('input[type="checkbox"]').first(),r=a.attr("name"),i=Boolean(a.attr("required")),o="validateCheckboxGroup";break;default:var r=e.data("name")||null,i=Boolean(e.data("required")),o=e.data("custom-validation")||null}var n=e.attr("title");if(!r)return console.error("ReptileForm: Unknown Field removed - name attribute not given"),null;var l=$(e[0].outerHTML);return l.removeAttr("data-name data-required data-type data-custom-validation"),$(document.createElement("div")).data("name",r).data("title",n).data("custom-validation",o).data("required",i).addClass("field").addClass(r).addClass(i?"required":null).addClass(t).append(n?"<label>"+n+"</label>":null).append(l)},rf.prototype.renderHiddenField=function(e){var t=e.attr("name"),a=t,r=Boolean(e.attr("required"));return t?(e.addClass("field").addClass(t).data("name",e.attr("name")).data("title",a).data("required",r),e.prop("outerHTML")):(console.error("ReptileForm: Unknown Hidden Field removed - name attribute not given"),null)},rf.prototype.validForm=function(form){var self=this,form=$(form);return self.clearErrors(),self.clearValues(),form.find(".field").each(function(){var value="",formField=$(this),title=formField.data("title"),name=formField.data("name"),customValidation=formField.data("custom-validation");if(customValidation&&$.isFunction(self.customValidation[customValidation]))return value=self.customValidation[customValidation].call(self,formField),void self.storeValue(name,value);if(value=self.getFieldValue(formField),self.storeValue(name,value),formField.data("required")||null!=value){if(formField.data("required")&&!value)return void self.addError(name,title,"Value is required");var expName=formField.data("exp-name");if(expName&&self.settings.expressions){var expression=self.settings.expressions[expName];expression&&expression.rule&&!eval(expression.rule).test(value)&&self.addError(name,title,expression.msg)}}}),$.isEmptyObject(self.getErrors())},rf.prototype.getFieldValue=function(e){{var t;e.data("name")}switch(!0){case e.attr("type")&&"hidden"==e.attr("type").toLowerCase():t=e.val();break;default:t=e.find("input, select, textarea").val()||null}return t},rf.prototype.addError=function(e,t,a){this.formErrors.push({name:e,title:t,msg:a})},rf.prototype.clearErrors=function(){this.formErrors=[]},rf.prototype.getErrors=function(){return this.formErrors},rf.prototype.storeValue=function(e,t){this.formValues[e]=t},rf.prototype.clearValues=function(){this.formValues={}},rf.prototype.getValues=function(){return this.formValues}}(jQuery,window,document);