!function($,window,document,undefined){ReptileForm=function(e,t){this.forms=e,$(e).each(function(){$(this).data("rf",new rf(this,t))}),this.customValidation("validateRadioGroup",function(e){var t=e.find("input:checked").val(),r=e.data("name");return e.data("required")&&!t&&this.addError(r,e.data("title"),"Value Is Required"),t}),this.customValidation("validateCheckboxGroup",function(e){var t=$('input[type="checkbox"]:checked').map(function(){return $(this).val()}).get(),r=e.data("name");return e.data("required")&&!t.length&&this.addError(r,e.data("title"),"Value Is Required"),t})},ReptileForm.prototype.customValidation=function(e,t){$(this.forms).each(function(){$(this).data("rf").customValidation[e]=t})},ReptileForm.prototype.on=function(e,t){$(this.forms).each(function(){var r=$(this).data("rf");$(r).on(e,t)})},ReptileForm.prototype.submit=function(e){$(this.forms).each(function(){var t=$(this).data("rf");t.submit=e})},rf=function(e,t){var r=this;return r.customValidation=[],r.el=$(e),r.el.length?(r.settings=$.extend(!0,{xhr:!0,expressions:{number:{rule:/^\d+$/,msg:"Invalid Number"},email:{rule:/^[a-zA-Z0-9._-]+@[\.a-zA-Z0-9-]+\.[a-zA-Z.]{2,5}$/,msg:"Invalid Email."},password:{rule:/^[\040-\176]{6,}$/,msg:"Invalid Password, Must be at least 6 characters."}}},t),r.el.attr("novalidate","novalidate"),r.clearErrors(),r.clearValues(),!r.el.attr("method")&&r.settings.xhr&&r.el.attr("method","POST"),!r.el.attr("action")&&r.settings.xhr&&console.error("ReptileForm: action attribue is required when in xhr mode"),r.el.children("input, select, textarea, .field-input").each(function(){if($(this).parents(".field").length)return!1;var e=$(this);switch(!0){case"hidden"==e.attr("type"):r.renderHiddenField(e);break;case e.hasClass("field-input"):e.replaceWith(r.renderCustomField(e));break;default:e.replaceWith(r.renderField(e))}}),void r.el.on("submit",function(){return $(r).trigger("beforeValidation"),r.validForm(this)?($(r).trigger("beforeSubmit"),r.settings.xhr?r.submit(r.el.attr("action"),r.getValues()):!0):($(r).trigger("validationError",[r.getErrors()]),!1)})):!1},rf.prototype.submit=function(e,t){var r=this;return $.ajax({cache:!1,type:r.el.attr("method"),dataType:"JSON",url:e,data:t,success:function(e){$(r).trigger("xhrSuccess",e)},error:function(e,t,a){$(r).trigger("xhrError",e,t,a)}}),!1},rf.prototype.renderField=function(e){var t=e.attr("name"),r=e.attr("title")||null,a=Boolean(e.attr("required")),i=e.data("exp-name")||null,o=e.data("custom-validation")||null;if(!t)return console.error("ReptileForm: Unknown Field removed - name attribute not given"),null;var n=$(e[0].outerHTML);n.removeAttr("title data-exp-name");var n=$(document.createElement("div")).addClass("field-input").html(n),l="";switch(e[0].tagName.toLowerCase()){case"select":l="select";break;case"textarea":l="textarea";break;case"input":default:l="text"}return $(document.createElement("div")).data("name",t).data("title",r?r:t).data("exp-name",i).data("custom-validation",o).data("required",a).addClass("field").addClass(t).addClass(a?"required":null).addClass(l).append(r?"<label>"+r+"</label>":null).append(n)},rf.prototype.renderCustomField=function(e){var t=e.data("type");switch(t!==undefined&&t.toLowerCase()){case"radio-group":var r=e.find('input[type="radio"]').first(),a=r.attr("name"),i=Boolean(r.attr("required")),o="validateRadioGroup";break;case"checkbox-group":var r=e.find('input[type="checkbox"]').first(),a=r.attr("name"),i=Boolean(r.attr("required")),o="validateCheckboxGroup";break;default:var a=e.data("name")||null,i=Boolean(e.data("required")),o=e.data("custom-validation")||null}var n=e.attr("title");if(!a)return console.error("ReptileForm: Unknown Field removed - name attribute not given"),null;var l=$(e[0].outerHTML);return l.removeAttr("data-name data-required data-type data-custom-validation"),$(document.createElement("div")).data("name",a).data("title",n).data("custom-validation",o).data("required",i).addClass("field").addClass(a).addClass(i?"required":null).addClass(t).append(n?"<label>"+n+"</label>":null).append(l)},rf.prototype.renderHiddenField=function(e){var t=e.attr("name"),r=t,a=Boolean(e.attr("required"));return t?(e.addClass("field").addClass(t).data("name",e.attr("name")).data("title",r).data("required",a),e.prop("outerHTML")):(console.error("ReptileForm: Unknown Hidden Field removed - name attribute not given"),null)},rf.prototype.validForm=function(form){var self=this,form=$(form);return self.clearErrors(),self.clearValues(),form.find(".field").each(function(){var value="",formField=$(this),title=formField.data("title"),name=formField.data("name"),customValidation=formField.data("custom-validation");if(customValidation&&$.isFunction(self.customValidation[customValidation]))return value=self.customValidation[customValidation].call(self,formField),void self.storeValue(name,value);if(value=self.getFieldValue(formField),self.storeValue(name,value),formField.data("required")||value){if(formField.data("required")&&!value)return void self.addError(name,title,"Value is required");var expName=formField.data("exp-name");if(expName&&self.settings.expressions){if(!self.settings.expressions[expName])return console.error("Expresion: '"+expName+"' has not been added to ReptileForms expressions"),!1;var expression=self.settings.expressions[expName],rule="string"==typeof expression.rule?eval(expression.rule):expression.rule;expression&&expression.rule&&!rule.test(value)&&self.addError(name,title,expression.msg)}}}),$.isEmptyObject(self.getErrors())},rf.prototype.getFieldValue=function(e){{var t;e.data("name")}switch(!0){case e.attr("type")&&"hidden"==e.attr("type").toLowerCase():t=e.val();break;default:t=e.find("input, select, textarea").val()||null}return t},rf.prototype.addError=function(e,t,r){this.formErrors.push({name:e,title:t,msg:r})},rf.prototype.clearErrors=function(){this.formErrors=[]},rf.prototype.getErrors=function(){return this.formErrors},rf.prototype.storeValue=function(e,t){this.formValues[e]=t},rf.prototype.clearValues=function(){this.formValues={}},rf.prototype.getValues=function(){return this.formValues}}(jQuery,window,document);